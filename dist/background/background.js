(()=>{async function e(){const{defaultspeed:e="1.0"}=await chrome.storage.local.get(["defaultspeed"]);chrome.action.setBadgeText({text:e}),chrome.action.setBadgeBackgroundColor({color:"#094e4b"})}chrome.runtime.onInstalled.addListener(e),chrome.runtime.onStartup.addListener(e),e(),chrome.storage.onChanged.addListener((e=>{e.defaultspeed&&chrome.action.setBadgeText({text:e.defaultspeed.newValue})})),chrome.commands.onCommand.addListener((async e=>{let a={};switch(e){case"as":case"ms":case"rs":{const{defaultspeed:t="1.0"}=await chrome.storage.local.get(["defaultspeed"]);let s=parseFloat(t);"as"===e?s=Math.min(16,s+.1):"ms"===e?s=Math.max(.1,s-.1):"rs"===e&&(s=1),a.defaultspeed=s.toFixed(1);break}case"cs":a.skipStart=0,a.skipEnd=0}Object.keys(a).length>0&&await chrome.storage.local.set(a)}))})();