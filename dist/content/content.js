(()=>{"use strict";let e=1,t=null,n=0,r=0;function a(t){if(!t)return;t.playbackRate!==e&&(t.playbackRate=e);try{t.play().catch((()=>{const e=()=>t.play();document.body.addEventListener("click",e,{once:!0,passive:!0}),document.body.addEventListener("keyup",e,{once:!0,passive:!0})}))}catch(e){console.error(e)}t.addEventListener("timeupdate",(()=>{1!==t.volume&&(t.volume=1)}),{once:!0}),t._startSkip=!1,t._endSkip=!1;const d=function(e){let t,n;return function(){const r=this,a=arguments;if(n){const d=200-(performance.now()-n);clearTimeout(t),d<=0?(e.apply(r,a),n=performance.now()):t=setTimeout((()=>{e.apply(r,a),n=performance.now()}),d)}else e.apply(r,a),n=performance.now()}}((()=>{const e=t.duration;Number.isNaN(e)||e<=n+r+1||(n>0&&t.currentTime<n&&!t._startSkip&&(t._startSkip=!0,t.currentTime=n),r>0&&e-t.currentTime<=r+.5&&!t._endSkip&&(t._endSkip=!0,t.currentTime=e-1))}));t._skipHandler&&t.removeEventListener("timeupdate",t._skipHandler),t._skipHandler=d,(n>0||r>0)&&t.addEventListener("timeupdate",d);const o=["loadedmetadata","ratechange"];t._speedHandler&&o.forEach((e=>t.removeEventListener(e,t._speedHandler))),t._speedHandler=()=>a(t),o.forEach((e=>t.addEventListener(e,t._speedHandler)))}function d(e){const t=e.querySelectorAll("video");return t.forEach(a),t.length}chrome.storage.local.get(["defaultspeed","skipStart","skipEnd"],(a=>{e=+a.defaultspeed||1,n=+a.skipStart||0,r=+a.skipEnd||0;let o=0;!function e(){d(document.body)<=0&&o<3?(o++,t=setTimeout(e,1e3)):t=null}()})),new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{1===e.nodeType&&d(e)}))}))})).observe(document.body,{subtree:!0,childList:!0}),chrome.storage.onChanged.addListener((t=>{t.defaultspeed&&(e=+t.defaultspeed.newValue,d(document.body)),t.skipStart&&(n=+t.skipStart.newValue,d(document.body)),t.skipEnd&&(r=+t.skipEnd.newValue,d(document.body))}))})();